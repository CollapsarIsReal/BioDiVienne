<!doctype html>
<html>
{% extends "conteneur3.html" %}
{% block corps %}

<title>Python Flask Image Upload and Display Example</title>
<div class="container">
  <div class="row align-items-start">
    <div class="col">
		<h2 style="text-align: center;">Selectionner une image</h2>
	</div>
  </div>
  <div class="row align-items-center">
    <div class="col">
{% if filename %}
	<div>
		<img src="{{
		url_for('display_image', filename=filename) }}">
	</div>

{% else %}
<!--Premier formulaire : charger le fichier -->
<form method="post" action="/upload" enctype="multipart/form-data">
    <dl>
		<p>
			<input type="file" name="file" autocomplete="off" required>
		</p>
    </dl>
    <p>
		<input class="btn btn-outline-primary" type="submit" id="bouton_charger" value="Valider">
	</p>
</form>
{% endif %}



<!--Deuxième formulaire : création de l'enregistrement dans la base-->
{% if filename %}
<p style="color:green;">L'image a été correctement chargée</p>
<form class="form" method="POST" action="/enregistrer" id="enreg">
		<div>
			<label for="regne">Règne</label>
      <select name="regne" id="regne">
        <option value="animal">Animal</option>
        <option value="vegetal">Vegetal</option>
      </select>
			Nom vernaculaire : <input class="font-italic" type="text" name="vernaculaire"><br/>
			Nom latin : <input class="font-italic" type="text" name="latin"><br/>
			Description : <input class="font-italic" type="text" name="description"><br/>
			Statut juridique : <input type="text" name="statut_juridique"><br/>
			Préoccupation : <input type="text" name="preoccupation"><br/>
		</div>
    <p>
		<input type="text" name="fichier" value={{filename}}>
		<input type="submit" value="Enregistrer">
	</p>
</form>
<label for="cars">Choose a car:</label>
<select id="cars" name="carlist" form="enreg">
  <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="opel">Opel</option>
  <option value="audi">Audi</option>
</select>
{% endif %}
{% endblock %}
</html>